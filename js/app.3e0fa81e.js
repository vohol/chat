(function(){"use strict";var t={7130:function(t,e,a){var s=a(9242),o=a(3396);function i(t,e,a,s,i,n){const r=(0,o.up)("chat-app");return(0,o.wg)(),(0,o.j4)(r)}var n=a(7139);const r={class:"chat"},g={class:"left-prt__header"},d=(0,o._)("div",{class:"avatar left-prt__avatar"},[(0,o._)("img",{src:"https://i.pravatar.cc/54?img=67",alt:"user avatar",class:"avatar__img"})],-1),m={class:"left-prt__main"},h=(0,o._)("h1",{class:"left-prt__title"},"Chats",-1),c={class:"chat-list"},l=["onClick"],u={class:"chat-item__img avatar"},y=["src"],p={class:"chat-item__body"},I={class:"chat-item__title"},v={class:"chat-item__name"},f={class:"chat-item__date"},w={class:"chat-item__subtitle"},_={class:"chat-item__msg"};function b(t,e,a,i,b,k){const C=(0,o.up)("ChatMsg"),H=(0,o.up)("NotificationsPopUp");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",{class:(0,n.C_)(["chat__left left-prt",{visible:!b.activeChatId}])},[(0,o._)("div",g,[d,(0,o.wy)((0,o._)("input",{type:"search",name:"search",id:"search",class:"left-prt__search",placeholder:"Search to start new chat","onUpdate:modelValue":e[0]||(e[0]=t=>b.searchRequest=t)},null,512),[[s.nr,b.searchRequest]])]),(0,o._)("div",m,[h,(0,o._)("div",c,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(k.getFilteredChatHistory,(t=>((0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["chat-list__item chat-item",{"chat-item--active":t.userId==b.activeChatId}]),key:t.userId,onClick:e=>{b.activeChatId=t.userId,b.searchRequest=""}},[(0,o._)("div",u,[(0,o._)("img",{src:`https://i.pravatar.cc/54?img=${t.userId}`,alt:"user avatar",class:"avatar__img"},null,8,y)]),(0,o._)("div",p,[(0,o._)("div",I,[(0,o._)("span",v,(0,n.zw)(t.name),1),(0,o._)("span",f,(0,n.zw)(k.timeConverter(k.getLastMsg(t.msgHistory).date)),1)]),(0,o._)("div",w,[(0,o._)("p",_,(0,n.zw)(k.getLastMsg(t.msgHistory).msg),1),(0,o.wy)((0,o._)("span",{class:"chat-item__new-counter"},(0,n.zw)(t.msgHistory.filter((t=>t.new)).length),513),[[s.F8,t.msgHistory.filter((t=>t.new)).length]])])])],10,l)))),128))])])],2),(0,o.Wm)(C,{chatId:b.activeChatId,class:(0,n.C_)(["chat__right",{visible:b.activeChatId}]),onBack:e[1]||(e[1]=t=>b.activeChatId="")},null,8,["chatId","class"]),(0,o.Wm)(H,{onOpenChat:e[2]||(e[2]=t=>k.changeId(t)),activeChatId:b.activeChatId},null,8,["activeChatId"])])}var k=a(65);const C={key:0,class:"rght-prt rght-prt--preview"},H=(0,o._)("span",null,"Select a chat to start messaging",-1),M=[H],D={key:1,class:"rght-prt"},N={class:"rght-prt__header"},T=(0,o._)("i",{class:"fa fa-solid fa-chevron-left"},null,-1),S=[T],W={class:"avatar"},O=["src"],P={class:"rght-prt__name"},B={class:"rght-prt__body"},z={key:0,class:"avatar msg-item__img"},G=["src"],$={class:"msg-item__body"},j={class:"msg-item__msg"},q={class:"msg-item__date"},E={class:"rght-prt__footer"},x=(0,o._)("p",null,"Enter - send message; Shift + Enter - new line.",-1),J=(0,o._)("button",{type:"submit",class:"form__btn"},[(0,o._)("i",{class:"fa fa-solid fa-paper-plane form__icon"})],-1);function U(t,e,a,i,r,g){return a.chatId?((0,o.wg)(),(0,o.iD)("div",D,[(0,o._)("div",N,[(0,o._)("button",{onClick:e[0]||(e[0]=e=>t.$emit("back")),class:"back-btn"},S),(0,o._)("div",W,[(0,o._)("img",{src:`https://i.pravatar.cc/54?img=${a.chatId}`,alt:"user avatar",class:"avatar__img"},null,8,O)]),(0,o._)("span",P,(0,n.zw)(t.getNameById(r.id)),1)]),(0,o._)("div",B,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(g.getMessages.slice().sort(((t,e)=>t.date-e.date)),(t=>((0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["msg-item",{"msg-item--out":!t.in}]),key:t.date},[t.in?((0,o.wg)(),(0,o.iD)("div",z,[(0,o._)("img",{src:`https://i.pravatar.cc/54?img=${a.chatId}`,alt:"user avatar",class:"avatar__img"},null,8,G)])):(0,o.kq)("",!0),(0,o._)("div",$,[(0,o._)("p",j,(0,n.zw)(t.msg),1),(0,o._)("p",q,(0,n.zw)(g.dateConverter(t.date)),1)])],2)))),128))]),(0,o._)("div",E,[(0,o._)("form",{class:"form",onSubmit:e[4]||(e[4]=(0,s.iM)((t=>g.sendMsg()),["prevent"]))},[(0,o.wy)((0,o._)("textarea",{class:"form__input","onUpdate:modelValue":e[1]||(e[1]=t=>r.newMsg=t),autofocus:"",onKeydown:[e[2]||(e[2]=(0,s.D2)((0,s.iM)((t=>g.sendMsg()),["exact","prevent"]),["enter"])),e[3]||(e[3]=(0,s.D2)((0,s.iM)(((...t)=>g.newline&&g.newline(...t)),["shift","exact","prevent"]),["enter"]))]},null,544),[[s.nr,r.newMsg]]),x,J],32)])])):((0,o.wg)(),(0,o.iD)("div",C,M))}var R={props:["chatId"],data(){return{newMsg:"",id:""}},computed:{...(0,k.Se)(["getMessagesById","getNameById"]),getMessages(){return this.getMessagesById(this.id)}},methods:{...(0,k.OI)(["addNewMsg","readNewMessages"]),newline(){this.newMsg=`${this.newMsg}\n`},setNewMsg(t,e,a,s){this.addNewMsg({date:Date.now(),msg:t,in:a,userId:e,new:s})},async sendMsg(){if(this.newMsg.trim()){this.setNewMsg(this.newMsg.trim(),this.chatId,!1,!1),this.newMsg="";const t=await this.fetchChuckJoke(),e=this.chatId;setTimeout((()=>{this.setNewMsg(t,e,!0,!0)}),1e4)}},dateConverter(t){let e=new Date(t);return e.toLocaleString().replace(/(\d+):(\d+):(\d+)/,"$1:$2").replace(/(\d{4})/,(t=>t.slice(2)))},scrollToBot(){let t=document.querySelector(".rght-prt__body");t.scrollTop=t.scrollHeight},async fetchChuckJoke(){const t=await fetch("https://api.chucknorris.io/jokes/random"),e=await t.json();return await e.value},goBack(){this.$emit("goBack")}},updated(){this.chatId&&(this.scrollToBot(),document.querySelector(".form__input").focus())},watch:{chatId:{immediate:!0,handler(t){this.readNewMessages(this.chatId),this.id=t}}}},F=a(89);const K=(0,F.Z)(R,[["render",U]]);var A=K;const L={class:"pop-up"},Z=["onClick"],Y={class:"notif-item__title"},V={class:"notif-item__span"},Q=(0,o.Uk)("New message from "),X={class:"notif-item__span--bold"},tt=(0,o._)("i",{class:"fas fa-times"},null,-1),et=[tt],at={class:"notif-item__msg"};function st(t,e,a,i,r,g){return(0,o.wg)(),(0,o.iD)("div",L,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(g.getNewMessages,(t=>((0,o.wg)(),(0,o.iD)("div",{key:t.date,class:"notif-item",onClick:e=>{r.callBackUserId=t.userId,g.openChat()}},[(0,o._)("div",Y,[(0,o._)("span",V,[Q,(0,o._)("span",X,(0,n.zw)(t.name),1)]),(0,o._)("button",{class:"notif-item__btn",onClick:e[0]||(e[0]=(0,s.iM)(((...t)=>g.closeItem&&g.closeItem(...t)),["stop"]))},et)]),(0,o._)("p",at,(0,n.zw)(t.msg),1)],8,Z)))),128))])}var ot={data(){return{startTime:0,callBackUserId:""}},props:["activeChatId"],computed:{...(0,k.Se)(["getChatHistory"]),getNewMessages(){return this.newMessages().filter((t=>t.date>=this.startTime))}},methods:{newMessages(){let t=[];return this.getChatHistory.forEach((e=>{e.msgHistory.forEach((a=>{a.new&&t.push({...a,userId:e.userId,name:e.name})}))})),t},closeItem(t){t.target.closest(".notif-item").remove()},openChat(){this.$emit("openChat",this.callBackUserId)}},mounted(){this.startTime=Date.now()}};const it=(0,F.Z)(ot,[["render",st]]);var nt=it,rt={data(){return{activeChatId:"",searchRequest:""}},computed:{...(0,k.Se)(["getChatHistory"]),getFilteredChatHistory(){if(this.searchRequest.trim().length>=2){let t=new RegExp(this.searchRequest.trim(),"gi");return this.getChatHistory.filter((e=>t.test(e.name)))}return this.getChatHistory}},methods:{timeConverter(t){const e=new Date(t);return e.toDateString().replace(/^\w+/,"").replace(/(\d{2})/,"$1, ")},getLastMsg(t){return t.sort(((t,e)=>e.date-t.date))[0]},changeId(t){this.activeChatId=t}},components:{ChatMsg:A,NotificationsPopUp:nt}};const gt=(0,F.Z)(rt,[["render",b]]);var dt=gt,mt={components:{ChatApp:dt},name:"App",methods:{...(0,k.nv)(["fetchChatHistory"])},created(){this.fetchChatHistory()}};const ht=(0,F.Z)(mt,[["render",i]]);var ct=ht;const lt=[{userId:1,name:"Emma Watson",msgHistory:[{date:1660655176615,msg:"Hi, how are you doing?",in:!0},{date:1660655204434,msg:"I am fine. How about yourself?",in:!1},{date:1660655209685,msg:"I am pretty good. Thanks for asking.",in:!0},{date:1660655214951,msg:"No problem. So how have you been?",in:!1},{date:1660655222317,msg:"I've been great. What about you?",in:!0},{date:1660655231216,msg:"I've been good. I'm in school right now.",in:!1},{date:1660655240623,msg:"What school do you go to?",in:!0},{date:1660655252667,msg:"I go to PCC.",in:!1},{date:1660655271967,msg:"Do you like it there?",in:!0},{date:1660655284012,msg:"It's okay. It's a really big campus.",in:!1},{date:1660655294335,msg:"Good luck with school.",in:!0},{date:1660655300949,msg:"Thank you very much.",in:!1}]},{userId:2,name:"Johnny Depp",msgHistory:[{date:1660655176615,msg:"Hi, how are you doing?",in:!0},{date:1660655204434,msg:"I am fine. How about yourself?",in:!1},{date:1660655209685,msg:"I am pretty good. Thanks for asking.",in:!0},{date:1660655214951,msg:"No problem. So how have you been?",in:!1},{date:1660655222317,msg:"I've been great. What about you?",in:!0},{date:1660655231216,msg:"I've been good. I'm in school right now.",in:!1},{date:1660655240623,msg:"What school do you go to?",in:!0},{date:1660655252667,msg:"I go to PCC.",in:!1},{date:1660655271967,msg:"Do you like it there?",in:!0},{date:1660655284012,msg:"It's okay. It's a really big campus.",in:!1},{date:1660655294335,msg:"Good luck with school.",in:!0},{date:1660655300949,msg:"Thank you very much.",in:!1}]},{userId:3,name:"Arnold Schwarzenegger",msgHistory:[{date:1660655176615,msg:"Hi, how are you doing?",in:!0},{date:1660655204434,msg:"I am fine. How about yourself?",in:!1},{date:1660655209685,msg:"I am pretty good. Thanks for asking.",in:!0},{date:1660655214951,msg:"No problem. So how have you been?",in:!1},{date:1660655222317,msg:"I've been great. What about you?",in:!0},{date:1660655231216,msg:"I've been good. I'm in school right now.",in:!1},{date:1660655240623,msg:"What school do you go to?",in:!0},{date:1660655252667,msg:"I go to PCC.",in:!1},{date:1660655271967,msg:"Do you like it there?",in:!0},{date:1660655284012,msg:"It's okay. It's a really big campus.",in:!1},{date:1660655294335,msg:"Good luck with school.",in:!0},{date:1660655300949,msg:"Thank you very much.",in:!1}]},{userId:4,name:"Jim Carrey",msgHistory:[{date:1660655176615,msg:"Hi, how are you doing?",in:!0},{date:1660655204434,msg:"I am fine. How about yourself?",in:!1},{date:1660655209685,msg:"I am pretty good. Thanks for asking.",in:!0},{date:1660655214951,msg:"No problem. So how have you been?",in:!1},{date:1660655222317,msg:"I've been great. What about you?",in:!0},{date:1660655231216,msg:"I've been good. I'm in school right now.",in:!1},{date:1660655240623,msg:"What school do you go to?",in:!0},{date:1660655252667,msg:"I go to PCC.",in:!1},{date:1660655271967,msg:"Do you like it there?",in:!0},{date:1660655284012,msg:"It's okay. It's a really big campus.",in:!1},{date:1660655294335,msg:"Good luck with school.",in:!0},{date:1660655300949,msg:"Thank you very much.",in:!1}]},{userId:5,name:" Cameron Diaz",msgHistory:[{date:1660655176615,msg:"Hi, how are you doing?",in:!0},{date:1660655204434,msg:"I am fine. How about yourself?",in:!1},{date:1660655209685,msg:"I am pretty good. Thanks for asking.",in:!0},{date:1660655214951,msg:"No problem. So how have you been?",in:!1},{date:1660655222317,msg:"I've been great. What about you?",in:!0},{date:1660655231216,msg:"I've been good. I'm in school right now.",in:!1},{date:1660655240623,msg:"What school do you go to?",in:!0},{date:1660655252667,msg:"I go to PCC.",in:!1},{date:1660655271967,msg:"Do you like it there?",in:!0},{date:1660655284012,msg:"It's okay. It's a really big campus.",in:!1},{date:1660655294335,msg:"Good luck with school.",in:!0},{date:1660655300949,msg:"Thank you very much.",in:!1}]},{userId:6,name:"Dwayne Johnson",msgHistory:[{date:1660655176615,msg:"Hi, how are you doing?",in:!0},{date:1660655204434,msg:"I am fine. How about yourself?",in:!1},{date:1660655209685,msg:"I am pretty good. Thanks for asking.",in:!0},{date:1660655214951,msg:"No problem. So how have you been?",in:!1},{date:1660655222317,msg:"I've been great. What about you?",in:!0},{date:1660655231216,msg:"I've been good. I'm in school right now.",in:!1},{date:1660655240623,msg:"What school do you go to?",in:!0},{date:1660655252667,msg:"I go to PCC.",in:!1},{date:1660655271967,msg:"Do you like it there?",in:!0},{date:1660655284012,msg:"It's okay. It's a really big campus.",in:!1},{date:1660655294335,msg:"Good luck with school.",in:!0},{date:1660655300949,msg:"Thank you very much.",in:!1}]},{userId:7,name:"Harrison Ford",msgHistory:[{date:1660655176615,msg:"Hi, how are you doing?",in:!0},{date:1660655204434,msg:"I am fine. How about yourself?",in:!1},{date:1660655209685,msg:"I am pretty good. Thanks for asking.",in:!0},{date:1660655214951,msg:"No problem. So how have you been?",in:!1},{date:1660655222317,msg:"I've been great. What about you?",in:!0},{date:1660655231216,msg:"I've been good. I'm in school right now.",in:!1},{date:1660655240623,msg:"What school do you go to?",in:!0},{date:1660655252667,msg:"I go to PCC.",in:!1},{date:1660655271967,msg:"Do you like it there?",in:!0},{date:1660655284012,msg:"It's okay. It's a really big campus.",in:!1},{date:1660655294335,msg:"Good luck with school.",in:!0},{date:1660655300949,msg:"Thank you very much.",in:!1}]},{userId:8,name:"Al Pacino",msgHistory:[{date:1660655176615,msg:"Hi, how are you doing?",in:!0},{date:1660655204434,msg:"I am fine. How about yourself?",in:!1},{date:1660655209685,msg:"I am pretty good. Thanks for asking.",in:!0},{date:1660655214951,msg:"No problem. So how have you been?",in:!1},{date:1660655222317,msg:"I've been great. What about you?",in:!0},{date:1660655231216,msg:"I've been good. I'm in school right now.",in:!1},{date:1660655240623,msg:"What school do you go to?",in:!0},{date:1660655252667,msg:"I go to PCC.",in:!1},{date:1660655271967,msg:"Do you like it there?",in:!0},{date:1660655284012,msg:"It's okay. It's a really big campus.",in:!1},{date:1660655294335,msg:"Good luck with school.",in:!0},{date:1660655300949,msg:"Thank you very much.",in:!1}]},{userId:9,name:"Natalie Portman",msgHistory:[{date:1660655176615,msg:"Hi, how are you doing?",in:!0},{date:1660655204434,msg:"I am fine. How about yourself?",in:!1},{date:1660655209685,msg:"I am pretty good. Thanks for asking.",in:!0},{date:1660655214951,msg:"No problem. So how have you been?",in:!1},{date:1660655222317,msg:"I've been great. What about you?",in:!0},{date:1660655231216,msg:"I've been good. I'm in school right now.",in:!1},{date:1660655240623,msg:"What school do you go to?",in:!0},{date:1660655252667,msg:"I go to PCC.",in:!1},{date:1660655271967,msg:"Do you like it there?",in:!0},{date:1660655284012,msg:"It's okay. It's a really big campus.",in:!1},{date:1660655294335,msg:"Good luck with school.",in:!0},{date:1660807543188,msg:"Thank you very much. My friend",in:!1}]},{userId:10,name:"Kate Winslet",msgHistory:[{date:1660655176615,msg:"Hi, how are you doing?",in:!0},{date:1660655204434,msg:"I am fine. How about yourself?",in:!1},{date:1660655209685,msg:"I am pretty good. Thanks for asking.",in:!0},{date:1660655214951,msg:"No problem. So how have you been?",in:!1},{date:1660655222317,msg:"I've been great. What about you?",in:!0},{date:1660655231216,msg:"I've been good. I'm in school right now.",in:!1},{date:1660655240623,msg:"What school do you go to?",in:!0},{date:1660655252667,msg:"I go to PCC.",in:!1},{date:1660655271967,msg:"Do you like it there?",in:!0},{date:1660655284012,msg:"It's okay. It's a really big campus.",in:!1},{date:1660655294335,msg:"Good luck with school.",in:!0},{date:1660695300949,msg:"Thank you very much.",in:!1}]}];var ut=lt,yt={actions:{fetchChatHistory(t){let e;e=localStorage.getItem("history")?JSON.parse(localStorage.getItem("history")):ut,t.commit("updateChatHistory",e)}},mutations:{updateChatHistory(t,e){t.chatHistory=e},addNewMsg(t,e){t.chatHistory.forEach((t=>{t.userId!=e.userId||t.msgHistory.push({date:e.date,msg:e.msg,in:e.in,new:e.new})})),localStorage.setItem("history",JSON.stringify(t.chatHistory))},readNewMessages(t,e){t.chatHistory.forEach((t=>{t.userId!=e||t.msgHistory.map((t=>t.new=!1))})),localStorage.setItem("history",JSON.stringify(t.chatHistory))}},state:{chatHistory:[]},getters:{getMessagesById:t=>e=>t.chatHistory.filter((t=>t.userId==e))[0].msgHistory,getChatHistory(t){return t.chatHistory.sort(((t,e)=>pt(e.msgHistory).date-pt(t.msgHistory).date))},getNameById:t=>e=>t.chatHistory.filter((t=>t.userId==e))[0].name}};function pt(t){return t.sort(((t,e)=>e.date-t.date))[0]}const It=(0,k.MT)({modules:{chatHistory:yt}});var vt=It;(0,s.ri)(ct).use(vt).mount("#app")}},e={};function a(s){var o=e[s];if(void 0!==o)return o.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,s,o,i){if(!s){var n=1/0;for(m=0;m<t.length;m++){s=t[m][0],o=t[m][1],i=t[m][2];for(var r=!0,g=0;g<s.length;g++)(!1&i||n>=i)&&Object.keys(a.O).every((function(t){return a.O[t](s[g])}))?s.splice(g--,1):(r=!1,i<n&&(n=i));if(r){t.splice(m--,1);var d=o();void 0!==d&&(e=d)}}return e}i=i||0;for(var m=t.length;m>0&&t[m-1][2]>i;m--)t[m]=t[m-1];t[m]=[s,o,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,i,n=s[0],r=s[1],g=s[2],d=0;if(n.some((function(e){return 0!==t[e]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(g)var m=g(a)}for(e&&e(s);d<n.length;d++)i=n[d],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(m)},s=self["webpackChunkchat"]=self["webpackChunkchat"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(7130)}));s=a.O(s)})();
//# sourceMappingURL=app.3e0fa81e.js.map